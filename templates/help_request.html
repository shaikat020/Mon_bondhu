{% extends 'base.html' %}

{% block content %}
<div class="container">
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 800px; margin-left: auto; margin-right: auto;">
        <h2 style="color: #4a5568; margin-bottom: 1rem;">ржЧрзЛржкржи рж╕рж╛рж╣рж╛ржпрзНржп ржЕржирзБрж░рзЛржз</h2>
        <p style="color: #718096; margin-bottom: 2rem;">ржЖржкржирж╛рж░ ржкрж░рж┐ржЪржпрж╝ ржЧрзЛржкржи рж░рзЗржЦрзЗ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржиред ржЖржкржирж╛рж░ ржХрзЛржи ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржмрзЗ ржирж╛ред</p>
        
        <div style="background: #e6fffa; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem; border-left: 4px solid #38b2ac;">
            <h4 style="color: #234e52; margin-bottom: 0.5rem;">ЁЯФТ ржЖржкржирж╛рж░ ржЧрзЛржкржирзАржпрж╝рждрж╛ рж╕рзБрж░ржХрзНрж╖рж┐ржд</h4>
            <p style="color: #234e52; margin: 0;">
                тАв ржХрзЛржи ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп рж╕ржВржЧрзНрж░рж╣ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛<br>
                тАв ржЖржкржирж╛рж░ ржирж╛ржо, ржлрзЛржи ржиржорзНржмрж░ ржмрж╛ ржарж┐ржХрж╛ржирж╛ ржЬрж┐ржЬрзНржЮрж╛рж╕рж╛ ржХрж░рж╛ рж╣ржпрж╝ ржирж╛<br>
                тАв ржЕржирзБрж░рзЛржзржЯрж┐ рж╢рзБржзрзБржорж╛рждрзНрж░ ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАрж░рж╛ ржжрзЗржЦрждрзЗ ржкрж╛ржи
            </p>
        </div>

        <form id="helpForm" method="POST">
            {% csrf_token %}
            
            <div style="margin-bottom: 2rem;">
                <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                    ржЖржорж┐ ржХрзЛржи ржзрж░ржирзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржЪрж╛ржЗ: *
                </label>
                <select name="help_type" required style="width: 100%; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 10px; font-size: 1rem;">
                    <option value="">рж╕рж╛рж╣рж╛ржпрзНржпрзЗрж░ ржзрж░ржи ржирж┐рж░рзНржмрж╛ржЪржи ржХрж░рзБржи</option>
                    <option value="mental_health">ржорж╛ржирж╕рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕рж╣рж╛ржпрж╝рждрж╛ (ржЪрж┐ржирзНрждрж╛, ржжрзБрж╢рзНржЪрж┐ржирзНрждрж╛, ржмрж┐рж╖ржгрзНржгрждрж╛)</option>
                    <option value="physical_health">рж╢рж╛рж░рзАрж░рж┐ржХ рж╕рзНржмрж╛рж╕рзНржерзНржп рж╕ржорж╕рзНржпрж╛</option>
                    <option value="emergency">ржЬрж░рзБрж░рзА рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи</option>
                    <option value="family">ржкрж╛рж░рж┐ржмрж╛рж░рж┐ржХ рж╕ржорж╕рзНржпрж╛</option>
                    <option value="other">ржЕржирзНржпрж╛ржирзНржп</option>
                </select>
            </div>
            
            <div style="margin-bottom: 2rem;">
                <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                    ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд ржмрж░рзНржгржирж╛ ржХрж░рзБржи: *
                </label>
                <textarea name="description" required 
                          placeholder="ржЖржкржирж╛рж░ рж╕ржорж╕рзНржпрж╛ ржмрж╛ ржХрзА ржзрж░ржирзЗрж░ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржпрж╝рзЛржЬржи рждрж╛ ржмрж┐рж╕рзНрждрж╛рж░рж┐ржд рж▓рж┐ржЦрзБржи..." 
                          style="width: 100%; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 10px; min-height: 150px; resize: vertical;"></textarea>
            </div>
            
            <div style="margin-bottom: 2rem;">
                <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                    ржпрзЛржЧрж╛ржпрзЛржЧрзЗрж░ ржкржжрзНржзрждрж┐ (ржРржЪрзНржЫрж┐ржХ):
                </label>
                <input type="text" name="contact_preference" 
                       placeholder="ржпрзЗржоржи: ржлрзЛржи ржХрж▓, рж╣рзЛржпрж╝рж╛ржЯрж╕ржЕрзНржпрж╛ржк, ржмрзНржпржХрзНрждрж┐ржЧржд ржжрзЗржЦрж╛ ржЗрждрзНржпрж╛ржжрж┐" 
                       style="width: 100%; padding: 1rem; border: 2px solid #e2e8f0; border-radius: 10px;">
            </div>

            <!-- Consent Section -->
            <div style="background: #fff3cd; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
                <label style="display: flex; align-items: start; gap: 1rem; cursor: pointer;">
                    <input type="checkbox" required style="margin-top: 0.25rem;">
                    <span style="color: #856404;">
                        ржЖржорж┐ ржмрзБржЭрждрзЗ ржкрж╛рж░ржЫрж┐ ржпрзЗ ржПржЯрж┐ ржПржХржЯрж┐ ржЧрзЛржкржи рж╕рж╛рж╣рж╛ржпрзНржп ржЕржирзБрж░рзЛржзред ржЖржорж╛рж░ ржЕржирзБрж░рзЛржзржЯрж┐ рж╕рзНржерж╛ржирзАржпрж╝ ржПржХржЬржи ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржжрзЗржЦржмрзЗржи ржПржмржВ ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржжрж╛ржи ржХрж░ржмрзЗржиред ржЖржорж┐ ржЖржорж╛рж░ ржХрзЛржи ржмрзНржпржХрзНрждрж┐ржЧржд рждржерзНржп ржкрзНрж░ржжрж╛ржи ржХрж░ржЫрж┐ ржирж╛ ржПржмржВ ржЖржорж╛рж░ ржЧрзЛржкржирзАржпрж╝рждрж╛ рж╕ржорзНржкрзВрж░рзНржгржнрж╛ржмрзЗ рж╕рзБрж░ржХрзНрж╖рж┐ржд ржерж╛ржХржмрзЗред
                    </span>
                </label>
            </div>
            
            <button type="submit" class="btn" style="background: #667eea; color: white; width: 100%; padding: 1rem; font-size: 1.1rem;">
                рж╕рж╛рж╣рж╛ржпрзНржп ржЕржирзБрж░рзЛржз ржкрж╛ржарж╛ржи
            </button>
        </form>
        
        <div id="responseMessage" style="display: none; padding: 1.5rem; border-radius: 10px; margin-top: 1rem; text-align: center;"></div>
    </div>

    <!-- What Happens Next -->
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0; max-width: 800px; margin-left: auto; margin-right: auto;">
        <h3 style="color: #4a5568; margin-bottom: 1rem;">ржПрж░ржкрж░ ржХрзА рж╣ржмрзЗ?</h3>
        <div style="display: grid; gap: 1.5rem;">
            <div style="display: flex; gap: 1rem; align-items: start;">
                <div style="background: #667eea; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">1</div>
                <div>
                    <h4 style="color: #2d3748; margin-bottom: 0.5rem;">ржЕржирзБрж░рзЛржз ржкрзНрж░рж╛ржкрзНрждрж┐</h4>
                    <p style="color: #718096; margin: 0;">ржЖржкржирж╛рж░ ржЕржирзБрж░рзЛржзржЯрж┐ ржЖржорж╛ржжрзЗрж░ рж╕рж┐рж╕рзНржЯрзЗржорзЗ рж╕ржВрж░ржХрзНрж╖рж┐ржд рж╣ржмрзЗ</p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: start;">
                <div style="background: #667eea; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">2</div>
                <div>
                    <h4 style="color: #2d3748; margin-bottom: 0.5rem;">рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзАрж░ ржХрж╛ржЫрзЗ ржкрзНрж░рзЗрж░ржг</h4>
                    <p style="color: #718096; margin: 0;">ржПржХржЬржи ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЖржкржирж╛рж░ ржЕржирзБрж░рзЛржзржЯрж┐ ржжрзЗржЦржмрзЗржи</p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: start;">
                <div style="background: #667eea; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">3</div>
                <div>
                    <h4 style="color: #2d3748; margin-bottom: 0.5rem;">ржпрзЛржЧрж╛ржпрзЛржЧ</h4>
                    <p style="color: #718096; margin: 0;">рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА ржЖржкржирж╛рж░ ржкржЫржирзНржжрзЗрж░ ржкржжрзНржзрждрж┐рждрзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржмрзЗржи</p>
                </div>
            </div>
            
            <div style="display: flex; gap: 1rem; align-items: start;">
                <div style="background: #667eea; color: white; width: 2rem; height: 2rem; border-radius: 50%; display: flex; align-items: center; justify-content: center; flex-shrink: 0;">4</div>
                <div>
                    <h4 style="color: #2d3748; margin-bottom: 0.5rem;">рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржжрж╛ржи</h4>
                    <p style="color: #718096; margin: 0;">ржкрзНрж░ржпрж╝рзЛржЬржирзАржпрж╝ ржкрж░рж╛ржорж░рзНрж╢ ржУ рж╕рж╛рж╣рж╛ржпрзНржп ржкрзНрж░ржжрж╛ржи ржХрж░рж╛ рж╣ржмрзЗ</p>
                </div>
            </div>
        </div>
    </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const helpForm = document.getElementById('helpForm');
    const responseMessage = document.getElementById('responseMessage');
    
    helpForm.addEventListener('submit', function(e) {
        e.preventDefault();
        
        if (!this.checkValidity()) {
            this.reportValidity();
            return;
        }
        
        const formData = new FormData(this);
        
        // Show loading state
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.textContent;
        submitBtn.textContent = 'ржкрж╛ржарж╛ржирзЛ рж╣ржЪрзНржЫрзЗ...';
        submitBtn.disabled = true;
        
        fetch('', {
            method: 'POST',
            body: formData,
            headers: {
                'X-Requested-With': 'XMLHttpRequest'
            }
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                responseMessage.textContent = 'тЬЕ ржЖржкржирж╛рж░ рж╕рж╛рж╣рж╛ржпрзНржп ржЕржирзБрж░рзЛржз рж╕ржлрж▓ржнрж╛ржмрзЗ ржкрж╛ржарж╛ржирзЛ рж╣ржпрж╝рзЗржЫрзЗ! ржПржХржЬржи ржкрзНрж░рж╢рж┐ржХрзНрж╖рж┐ржд рж╕рзНржмрж╛рж╕рзНржерзНржпржХрж░рзНржорзА рж╢рзАржШрзНрж░ржЗ ржЖржкржирж╛рж░ рж╕рж╛ржерзЗ ржпрзЛржЧрж╛ржпрзЛржЧ ржХрж░ржмрзЗржиред';
                responseMessage.style.background = '#c6f6d5';
                responseMessage.style.color = '#276749';
                responseMessage.style.display = 'block';
                helpForm.reset();
                
                // Scroll to message
                responseMessage.scrollIntoView({ behavior: 'smooth' });
            }
        })
        .catch(error => {
            responseMessage.textContent = 'тЭМ ржПржХржЯрж┐ рж╕ржорж╕рзНржпрж╛ рж╣ржпрж╝рзЗржЫрзЗред ржЕржирзБржЧрзНрж░рж╣ ржХрж░рзЗ ржЖржмрж╛рж░ ржЪрзЗрж╖рзНржЯрж╛ ржХрж░рзБржиред';
            responseMessage.style.background = '#fed7d7';
            responseMessage.style.color = '#c53030';
            responseMessage.style.display = 'block';
        })
        .finally(() => {
            submitBtn.textContent = originalText;
            submitBtn.disabled = false;
        });
    });
});
</script>
{% endblock %}