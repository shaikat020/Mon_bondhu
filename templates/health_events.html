{% extends 'base.html' %}

{% block content %}
<main class="container mx-auto px-4 py-8">
    <div class="glass-morphism p-8 rounded-3xl">
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0;">
        <h2 style="color: #4a5568; margin-bottom: 1rem;">üé™ ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</h2>
        <p style="color: #718096; margin-bottom: 2rem;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™, ‡¶ü‡¶ø‡¶ï‡¶æ‡¶¶‡¶æ‡¶® ‡¶ì ‡¶∏‡¶ö‡ßá‡¶§‡¶®‡¶§‡¶æ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡ßÇ‡¶ö‡ßÄ</p>
        
        <!-- Event Filters -->
        <div style="background: #f7fafc; padding: 1.5rem; border-radius: 10px; margin-bottom: 2rem;">
            <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; margin-bottom: 1rem;">
                <input type="text" id="searchEvents" placeholder="‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶¨‡¶æ ‡¶∏‡ßç‡¶•‡¶æ‡¶® ‡¶ñ‡ßÅ‡¶Å‡¶ú‡ßÅ‡¶®..." 
                       style="padding: 1rem; border: 2px solid #e2e8f0; border-radius: 10px;">
                <select id="eventTypeFilter" style="padding: 1rem; border: 2px solid #e2e8f0; border-radius: 10px;">
                    <option value="all">‡¶∏‡¶¨ ‡¶ß‡¶∞‡¶£‡ßá‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</option>
                    <option value="health_camp">‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™</option>
                    <option value="vaccination">‡¶ü‡¶ø‡¶ï‡¶æ‡¶¶‡¶æ‡¶®</option>
                    <option value="screening">‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç</option>
                    <option value="awareness">‡¶∏‡¶ö‡ßá‡¶§‡¶®‡¶§‡¶æ</option>
                    <option value="blood_donation">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®</option>
                </select>
            </div>
            
            <div style="display: flex; gap: 1rem; flex-wrap: wrap;">
                <button class="filter-btn active" onclick="filterEvents('all')">‡¶∏‡¶¨ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</button>
                <button class="filter-btn" onclick="filterEvents('upcoming')">‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</button>
                <button class="filter-btn" onclick="filterEvents('today')">‡¶Ü‡¶ú‡¶ï‡ßá‡¶∞ ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü</button>
                <button class="filter-btn" onclick="filterEvents('this_week')">‡¶è‡¶á ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</button>
            </div>
        </div>

        <!-- Events List -->
        <div id="eventsList">
            <!-- Events will be loaded here -->
        </div>

        <!-- No Events Message -->
        <div id="noEvents" style="display: none; text-align: center; padding: 3rem; color: #718096;">
            <div style="font-size: 3rem; margin-bottom: 1rem;">üìÖ</div>
            <h3>‡¶ï‡ßã‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶™‡¶æ‡¶ì‡¶Ø‡¶º‡¶æ ‡¶Ø‡¶æ‡¶Ø‡¶º‡¶®‡¶ø</h3>
            <p>‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶è‡¶≤‡¶æ‡¶ï‡¶æ‡¶Ø‡¶º ‡¶è‡¶ñ‡¶®‡¶á ‡¶ï‡ßã‡¶® ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶®‡ßá‡¶á‡•§ ‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á ‡¶®‡¶§‡ßÅ‡¶® ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶¨‡ßá‡•§</p>
        </div>
    </div>

    <!-- Add Event Form (For demonstration) -->
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0;">
        <h3 style="color: #4a5568; margin-bottom: 1rem;">‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h3>
        <p style="color: #718096; margin-bottom: 2rem;">‡¶®‡¶§‡ßÅ‡¶® ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶® (‡¶°‡ßá‡¶Æ‡ßã ‡¶â‡¶¶‡ßç‡¶¶‡ßá‡¶∂‡ßç‡¶Ø‡ßá)</p>
        
        <form id="addEventForm" style="display: grid; gap: 1rem;">
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶®‡¶æ‡¶Æ *
                    </label>
                    <input type="text" name="title" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü‡ßá‡¶∞ ‡¶ß‡¶∞‡¶£ *
                    </label>
                    <select name="event_type" required 
                            style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                        <option value="">‡¶®‡¶ø‡¶∞‡ßç‡¶¨‡¶æ‡¶ö‡¶® ‡¶ï‡¶∞‡ßÅ‡¶®</option>
                        <option value="health_camp">‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™</option>
                        <option value="vaccination">‡¶ü‡¶ø‡¶ï‡¶æ‡¶¶‡¶æ‡¶® ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡ßÇ‡¶ö‡ßÄ</option>
                        <option value="screening">‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç</option>
                        <option value="awareness">‡¶∏‡¶ö‡ßá‡¶§‡¶®‡¶§‡¶æ ‡¶∏‡ßá‡¶∂‡¶®</option>
                        <option value="blood_donation">‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶® ‡¶∂‡¶ø‡¶¨‡¶ø‡¶∞</option>
                    </select>
                </div>
            </div>
            
            <div>
                <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                    ‡¶¨‡¶ø‡¶¨‡¶∞‡¶£
                </label>
                <textarea name="description" 
                          style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px; min-height: 80px; resize: vertical;"></textarea>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem;">
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ *
                    </label>
                    <input type="date" name="date" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶∏‡¶Æ‡¶Ø‡¶º *
                    </label>
                    <input type="time" name="start_time" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶∂‡ßá‡¶∑ ‡¶∏‡¶Æ‡¶Ø‡¶º *
                    </label>
                    <input type="time" name="end_time" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
            </div>
            
            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶∏‡ßç‡¶•‡¶æ‡¶® *
                    </label>
                    <input type="text" name="location" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
                <div>
                    <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                        ‡¶Ü‡¶Ø‡¶º‡ßã‡¶ú‡¶ï *
                    </label>
                    <input type="text" name="organizer" required 
                           style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                </div>
            </div>
            
            <button type="submit" class="btn" style="background: #667eea; color: white;">
                ‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
            </button>
        </form>
    </div>
    </div>
</main>

<style>
.filter-btn {
    padding: 0.5rem 1rem;
    border: 2px solid #e2e8f0;
    background: white;
    border-radius: 25px;
    cursor: pointer;
    transition: all 0.3s;
}

.filter-btn.active,
.filter-btn:hover {
    background: #667eea;
    color: white;
    border-color: #667eea;
}

.event-card {
    background: white;
    border: 2px solid #e2e8f0;
    border-radius: 10px;
    padding: 1.5rem;
    margin-bottom: 1.5rem;
    transition: all 0.3s;
}

.event-card:hover {
    border-color: #667eea;
    transform: translateY(-2px);
    box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

.event-card.urgent {
    border-left: 4px solid #e53e3e;
    background: #fff5f5;
}

.event-card.upcoming {
    border-left: 4px solid #38a169;
    background: #f0fff4;
}

.event-type-badge {
    padding: 0.25rem 0.75rem;
    border-radius: 15px;
    font-size: 0.8rem;
    font-weight: bold;
    margin-right: 0.5rem;
}

.badge-health_camp { background: #bee3f8; color: #2c5282; }
.badge-vaccination { background: #c6f6d5; color: #276749; }
.badge-screening { background: #fefcbf; color: #744210; }
.badge-awareness { background: #e9d8fd; color: #553c9a; }
.badge-blood_donation { background: #fed7d7; color: #c53030; }
</style>

/* Dark-mode overrides: increase contrast for health events page */
<style>
/* Override common inline white backgrounds and form controls */
body.dark-mode div[style*="background: white"] {
    background: #071127 !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
    color: #e6eef6 !important;
}

body.dark-mode div[style*="background: #f7fafc"] {
    background: #0b1220 !important;
    border-color: rgba(255,255,255,0.04) !important;
}

/* Headings and paragraph overrides for inline colored styles */
body.dark-mode h2[style*="color: #4a5568"],
body.dark-mode h3[style*="color: #4a5568"],
body.dark-mode p[style*="color: #718096"] {
    color: #f8fafc !important;
}

/* Inputs, selects, textarea */
body.dark-mode input[type="text"],
body.dark-mode input[type="date"],
body.dark-mode input[type="time"],
body.dark-mode select,
body.dark-mode textarea {
    background: #021223 !important;
    color: #e6eef6 !important;
    border: 1px solid rgba(255,255,255,0.06) !important;
}

/* Filter buttons */
body.dark-mode .filter-btn { background: #071127 !important; border-color: #243145 !important; color: #e6eef6 !important; }
body.dark-mode .filter-btn.active, body.dark-mode .filter-btn:hover { background: #4c51bf !important; color: #fff !important; border-color: #4c51bf !important; }

/* Event cards */
body.dark-mode .event-card { background: #071127 !important; border-color: #243145 !important; color: #e6eef6 !important; }
body.dark-mode .event-card:hover { box-shadow: 0 8px 26px rgba(2,6,23,0.6) !important; border-color: #4c51bf !important; }
body.dark-mode .event-card.urgent { background: #3f1f21 !important; }
body.dark-mode .event-card.upcoming { background: #07211a !important; }

/* Badges */
body.dark-mode .event-type-badge { background: rgba(255,255,255,0.04) !important; color: #e6eef6 !important; }
body.dark-mode .badge-health_camp { background: rgba(190,227,248,0.06) !important; color: #bcdff6 !important; }
body.dark-mode .badge-vaccination { background: rgba(198,246,213,0.04) !important; color: #a7e8c0 !important; }
body.dark-mode .badge-screening { background: rgba(254,252,191,0.04) !important; color: #fff6c8 !important; }
body.dark-mode .badge-awareness { background: rgba(233,216,253,0.04) !important; color: #dacdf8 !important; }
body.dark-mode .badge-blood_donation { background: rgba(254,215,215,0.04) !important; color: #ffbcbc !important; }

/* No events message */
body.dark-mode #noEvents { color: #cbd5e1 !important; }
body.dark-mode #noEvents h3 { color: #f8fafc !important; }

/* Buttons inside cards */
body.dark-mode .btn { background: #4c51bf !important; color: #fff !important; }
</style>

<script>
// Sample events data
let eventsData = [
    {
        id: 1,
        title: "‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá ‡¶°‡¶æ‡¶Ø‡¶º‡¶æ‡¶¨‡ßá‡¶ü‡¶ø‡¶∏ ‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™",
        event_type: "screening",
        description: "‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá ‡¶∞‡¶ï‡ßç‡¶§‡ßá‡¶∞ ‡¶∂‡¶∞‡ßç‡¶ï‡¶∞‡¶æ ‡¶™‡¶∞‡ßÄ‡¶ï‡ßç‡¶∑‡¶æ ‡¶ì ‡¶°‡¶æ‡¶Ø‡¶º‡¶æ‡¶¨‡ßá‡¶ü‡¶ø‡¶∏ ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶™‡¶∞‡¶æ‡¶Æ‡¶∞‡ßç‡¶∂",
        date: "2024-12-15",
        start_time: "09:00",
        end_time: "14:00",
        location: "‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø ‡¶∏‡ßá‡¶®‡ßç‡¶ü‡¶æ‡¶∞",
        upazila: "‡¶ö‡¶∞‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®",
        union: "‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ",
        organizer: "‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶¨‡¶ø‡¶≠‡¶æ‡¶ó, ‡¶ö‡¶∞‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®",
        contact: "‡ß¶‡ßß‡ßÆ‡ßß‡ß®-‡ß©‡ß™‡ß´‡ß¨‡ß≠‡ßÆ"
    },
    {
        id: 2,
        title: "‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶ü‡¶ø‡¶ï‡¶æ‡¶ï‡¶∞‡¶£ ‡¶ï‡¶∞‡ßç‡¶Æ‡¶∏‡ßÇ‡¶ö‡ßÄ",
        event_type: "vaccination",
        description: "‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ EPI ‡¶ü‡¶ø‡¶ï‡¶æ ‡¶¨‡¶ø‡¶®‡¶æ‡¶Æ‡ßÇ‡¶≤‡ßç‡¶Ø‡ßá ‡¶™‡ßç‡¶∞‡¶¶‡¶æ‡¶®",
        date: "2024-12-18",
        start_time: "08:00",
        end_time: "12:00",
        location: "‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï",
        upazila: "‡¶ö‡¶∞‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®",
        union: "‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ",
        organizer: "‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï",
        contact: "‡ß¶‡ßß‡ß≠‡ßß‡ßß-‡ß®‡ß®‡ß©‡ß©‡ß™‡ß™"
    },
    {
        id: 3,
        title: "‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∏‡¶ö‡ßá‡¶§‡¶®‡¶§‡¶æ ‡¶∏‡ßá‡¶∂‡¶®",
        event_type: "awareness",
        description: "‡¶Æ‡¶æ‡¶®‡¶∏‡¶ø‡¶ï ‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶∏‡¶Æ‡ßç‡¶™‡¶∞‡ßç‡¶ï‡¶ø‡¶§ ‡¶Ü‡¶≤‡ßã‡¶ö‡¶®‡¶æ ‡¶ì ‡¶™‡ßç‡¶∞‡¶∂‡ßç‡¶®‡ßã‡¶§‡ßç‡¶§‡¶∞ ‡¶™‡¶∞‡ßç‡¶¨",
        date: "2024-12-20",
        start_time: "15:00",
        end_time: "17:00",
        location: "‡¶∏‡ßç‡¶•‡¶æ‡¶®‡ßÄ‡¶Ø‡¶º ‡¶â‡¶ö‡ßç‡¶ö ‡¶¨‡¶ø‡¶¶‡ßç‡¶Ø‡¶æ‡¶≤‡¶Ø‡¶º",
        upazila: "‡¶ö‡¶∞‡¶´‡ßç‡¶Ø‡¶æ‡¶∂‡¶®",
        union: "‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ",
        organizer: "‡¶Æ‡¶®‡¶¨‡¶®‡ßç‡¶ß‡ßÅ ‡¶ü‡¶ø‡¶Æ",
        contact: ""
    }
];

function displayEvents(events = eventsData) {
    const container = document.getElementById('eventsList');
    const noEvents = document.getElementById('noEvents');
    
    if (events.length === 0) {
        container.style.display = 'none';
        noEvents.style.display = 'block';
        return;
    }
    
    container.style.display = 'block';
    noEvents.style.display = 'none';
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    container.innerHTML = events.map(event => {
        const eventDate = new Date(event.date);
        const isToday = eventDate.toDateString() === today.toDateString();
        const isUpcoming = eventDate >= today;
        const isUrgent = isToday || (eventDate - today) / (24 * 60 * 60 * 1000) <= 2;
        
        let cardClass = 'event-card';
        if (isUrgent) cardClass += ' urgent';
        else if (isUpcoming) cardClass += ' upcoming';
        
        const eventTypeText = {
            'health_camp': '‡¶∏‡ßç‡¶¨‡¶æ‡¶∏‡ßç‡¶•‡ßç‡¶Ø ‡¶ï‡ßç‡¶Ø‡¶æ‡¶Æ‡ßç‡¶™',
            'vaccination': '‡¶ü‡¶ø‡¶ï‡¶æ‡¶¶‡¶æ‡¶®',
            'screening': '‡¶∏‡ßç‡¶ï‡ßç‡¶∞‡ßÄ‡¶®‡¶ø‡¶Ç',
            'awareness': '‡¶∏‡¶ö‡ßá‡¶§‡¶®‡¶§‡¶æ',
            'blood_donation': '‡¶∞‡¶ï‡ßç‡¶§‡¶¶‡¶æ‡¶®'
        };
        
        return `
            <div class="${cardClass}">
                <div style="display: flex; justify-content: between; align-items: start; margin-bottom: 1rem;">
                    <div style="flex: 1;">
                        <h3 style="color: #2d3748; margin-bottom: 0.5rem;">${event.title}</h3>
                        <div style="display: flex; align-items: center; flex-wrap: wrap; gap: 0.5rem; margin-bottom: 0.5rem;">
                            <span class="event-type-badge badge-${event.event_type}">
                                ${eventTypeText[event.event_type]}
                            </span>
                            <span style="color: #718096; font-size: 0.9rem;">
                                ${eventDate.toLocaleDateString('bn-BD')} ‚Ä¢ ${event.start_time} - ${event.end_time}
                            </span>
                        </div>
                        <p style="color: #718096; margin: 0;">${event.description}</p>
                    </div>
                    ${isUrgent ? `
                        <div style="background: #e53e3e; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">
                            ${isToday ? '‡¶Ü‡¶ú' : '‡¶∂‡ßÄ‡¶ò‡ßç‡¶∞‡¶á'}
                        </div>
                    ` : ''}
                </div>
                
                <div style="display: grid; grid-template-columns: 1fr auto; gap: 1rem; align-items: end;">
                    <div>
                        <div style="color: #4a5568; margin-bottom: 0.5rem;">
                            <strong>‡¶∏‡ßç‡¶•‡¶æ‡¶®:</strong> ${event.location}
                        </div>
                        <div style="color: #4a5568;">
                            <strong>‡¶Ü‡¶Ø‡¶º‡ßã‡¶ú‡¶ï:</strong> ${event.organizer}
                            ${event.contact ? ` ‚Ä¢ <strong>‡¶Ø‡ßã‡¶ó‡¶æ‡¶Ø‡ßã‡¶ó:</strong> ${event.contact}` : ''}
                        </div>
                    </div>
                    <button class="btn" style="background: #667eea; color: white; white-space: nowrap;" 
                            onclick="remindEvent(${event.id})">
                        üìÖ ‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </div>
            </div>
        `;
    }).join('');
}

function filterEvents(filterType) {
    // Update active button
    document.querySelectorAll('.filter-btn').forEach(btn => {
        btn.classList.remove('active');
    });
    event.target.classList.add('active');
    
    const today = new Date();
    today.setHours(0, 0, 0, 0);
    
    const nextWeek = new Date(today);
    nextWeek.setDate(nextWeek.getDate() + 7);
    
    let filteredEvents = eventsData;
    
    switch (filterType) {
        case 'upcoming':
            filteredEvents = eventsData.filter(event => new Date(event.date) >= today);
            break;
        case 'today':
            filteredEvents = eventsData.filter(event => new Date(event.date).toDateString() === today.toDateString());
            break;
        case 'this_week':
            filteredEvents = eventsData.filter(event => {
                const eventDate = new Date(event.date);
                return eventDate >= today && eventDate <= nextWeek;
            });
            break;
    }
    
    // Apply search filter
    const searchTerm = document.getElementById('searchEvents').value.toLowerCase();
    if (searchTerm) {
        filteredEvents = filteredEvents.filter(event => 
            event.title.toLowerCase().includes(searchTerm) ||
            event.location.toLowerCase().includes(searchTerm) ||
            event.organizer.toLowerCase().includes(searchTerm)
        );
    }
    
    // Apply type filter
    const typeFilter = document.getElementById('eventTypeFilter').value;
    if (typeFilter !== 'all') {
        filteredEvents = filteredEvents.filter(event => event.event_type === typeFilter);
    }
    
    displayEvents(filteredEvents);
}

function remindEvent(eventId) {
    const event = eventsData.find(e => e.id === eventId);
    if (event) {
        alert(`‡¶∞‡¶ø‡¶Æ‡¶æ‡¶á‡¶®‡ßç‡¶°‡¶æ‡¶∞ ‡¶∏‡ßá‡¶ü ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá: ${event.title}\n‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: ${new Date(event.date).toLocaleDateString('bn-BD')}`);
        // In a real app, this would integrate with device calendar
    }
}

// Add event form handler
document.getElementById('addEventForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const formData = new FormData(this);
    const newEvent = {
        id: eventsData.length + 1,
        title: formData.get('title'),
        event_type: formData.get('event_type'),
        description: formData.get('description'),
        date: formData.get('date'),
        start_time: formData.get('start_time'),
        end_time: formData.get('end_time'),
        location: formData.get('location'),
        upazila: '‡¶ö‡¶∞‡¶´‡ßç‡¶Ø‡¶æ‡¶∂–Ω', // Default for demo
        union: '‡¶ö‡¶∞ ‡¶ï‡¶≤‡¶æ‡¶™‡¶æ‡¶°‡¶º‡¶æ', // Default for demo
        organizer: formData.get('organizer'),
        contact: ''
    };
    
    eventsData.push(newEvent);
    displayEvents(eventsData);
    this.reset();
    
    alert('‡¶á‡¶≠‡ßá‡¶®‡ßç‡¶ü ‡¶∏‡¶´‡¶≤‡¶≠‡¶æ‡¶¨‡ßá ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡¶æ ‡¶π‡¶Ø‡¶º‡ßá‡¶õ‡ßá!');
});

// Search and filter event listeners
document.getElementById('searchEvents').addEventListener('input', filterEvents);
document.getElementById('eventTypeFilter').addEventListener('change', filterEvents);

// Initialize
document.addEventListener('DOMContentLoaded', function() {
    displayEvents();
});
</script>
{% endblock %}