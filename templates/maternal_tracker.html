{% extends 'base.html' %}

{% block content %}
<main class="container mx-auto px-4 py-8">
    <div class="glass-morphism p-8 rounded-3xl">
    <!-- Pregnancy Tracker -->
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0;">
        <h2 style="color: #4a5568; margin-bottom: 1rem;">üíñ ‡¶ó‡¶∞‡ßç‡¶≠‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</h2>
        <p style="color: #718096; margin-bottom: 2rem;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßç‡¶≠‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶Ø‡¶§‡ßç‡¶® ‡¶ì ‡¶ö‡ßá‡¶ï‡¶Ü‡¶™‡ßá‡¶∞ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem; margin-bottom: 3rem;">
            <!-- Pregnancy Form -->
            <div style="background: #f0fff4; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #38a169;">
                <h4 style="color: #2d3748; margin-bottom: 1rem;">‡¶ó‡¶∞‡ßç‡¶≠‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
                <form id="pregnancyForm">
                    {% csrf_token %}
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                            ‡¶∂‡ßá‡¶∑ ‡¶Æ‡¶æ‡¶∏‡¶ø‡¶ï‡ßá‡¶∞ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: *
                        </label>
                        <input type="date" name="last_period_date" required 
                               style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                    </div>
                    <button type="submit" class="btn" style="background: #38a169; color: white; width: 100%;">
                        ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞ ‡¶∂‡ßÅ‡¶∞‡ßÅ ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </form>
            </div>
            
            <!-- ANC Schedule -->
            <div style="background: #fffaf0; padding: 1.5rem; border-radius: 10px; border-left: 4px solid #dd6b20;">
                <h4 style="color: #2d3748; margin-bottom: 1rem;">‡¶ó‡¶∞‡ßç‡¶≠‡¶ï‡¶æ‡¶≤‡ßÄ‡¶® ‡¶Ø‡¶§‡ßç‡¶® (ANC) ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ</h4>
                <div style="color: #718096;">
                    <p>‚Ä¢ ‡ßß‡¶Æ ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: ‡ßß‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá‡¶∞ ‡¶Æ‡¶ß‡ßç‡¶Ø‡ßá</p>
                    <p>‚Ä¢ ‡ß®‡¶Ø‡¶º ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: ‡ß®‡ß¨-‡ß®‡ßÆ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</p>
                    <p>‚Ä¢ ‡ß©‡¶Ø‡¶º ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: ‡ß©‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</p>
                    <p>‚Ä¢ ‡ß™‡¶∞‡ßç‡¶• ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: ‡ß©‡ß¨ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</p>
                    <p>‚Ä¢ ‡¶™‡¶∞‡¶¨‡¶∞‡ßç‡¶§‡ßÄ ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü: ‡¶™‡ßç‡¶∞‡¶§‡¶ø ‡ß® ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π‡ßá</p>
                </div>
            </div>
        </div>

        <!-- Pregnancy Progress -->
        <div id="pregnancyProgress" style="display: none;">
            <h3 style="color: #4a5568; margin-bottom: 1rem;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶ó‡¶∞‡ßç‡¶≠‡¶æ‡¶¨‡¶∏‡ßç‡¶•‡¶æ‡¶∞ ‡¶Ö‡¶ó‡ßç‡¶∞‡¶ó‡¶§‡¶ø</h3>
            <div style="background: linear-gradient(135deg, #667eea, #764ba2); color: white; padding: 2rem; border-radius: 15px; margin-bottom: 2rem;">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; text-align: center;">
                    <div>
                        <div style="font-size: 2rem;" id="currentWeek">‡ß¶</div>
                        <div>‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem;" id="daysLeft">‡ß¶</div>
                        <div>‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø</div>
                    </div>
                    <div>
                        <div style="font-size: 2rem;" id="trimester">‡ßß</div>
                        <div>‡¶ü‡ßç‡¶∞‡¶æ‡¶á‡¶Æ‡ßá‡¶∏‡ßç‡¶ü‡¶æ‡¶∞</div>
                    </div>
                </div>
            </div>
            
            <!-- Upcoming Checkups -->
            <div style="margin-bottom: 2rem;">
                <h4 style="color: #2d3748; margin-bottom: 1rem;">‡¶Ü‡¶∏‡¶®‡ßç‡¶® ‡¶ö‡ßá‡¶ï‡¶Ü‡¶™</h4>
                <div id="upcomingCheckups" style="display: grid; gap: 1rem;"></div>
            </div>
        </div>
    </div>

    <!-- Vaccination Tracker -->
    <div style="background: white; padding: 2rem; border-radius: 15px; margin: 2rem 0;">
        <h2 style="color: #4a5568; margin-bottom: 1rem;">üíâ ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶ü‡¶ø‡¶ï‡¶æ‡¶ï‡¶∞‡¶£ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï‡¶æ‡¶∞</h2>
        <p style="color: #718096; margin-bottom: 2rem;">‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶∏‡¶Æ‡ßç‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ ‡¶ü‡ßç‡¶∞‡ßç‡¶Ø‡¶æ‡¶ï ‡¶ï‡¶∞‡ßÅ‡¶®</p>
        
        <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 2rem;">
            <!-- Add Child Form -->
            <div style="background: #f0fff4; padding: 1.5rem; border-radius: 10px;">
                <h4 style="color: #2d3748; margin-bottom: 1rem;">‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶§‡¶•‡ßç‡¶Ø ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®</h4>
                <form id="childForm">
                    {% csrf_token %}
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                            ‡¶∂‡¶ø‡¶∂‡ßÅ‡¶∞ ‡¶®‡¶æ‡¶Æ:
                        </label>
                        <input type="text" name="child_name" required 
                               style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                    </div>
                    <div style="margin-bottom: 1rem;">
                        <label style="display: block; color: #4a5568; margin-bottom: 0.5rem; font-weight: bold;">
                            ‡¶ú‡¶®‡ßç‡¶Æ ‡¶§‡¶æ‡¶∞‡¶ø‡¶ñ: *
                        </label>
                        <input type="date" name="birth_date" required 
                               style="width: 100%; padding: 0.75rem; border: 2px solid #e2e8f0; border-radius: 8px;">
                    </div>
                    <button type="submit" class="btn" style="background: #38a169; color: white; width: 100%;">
                        ‡¶∂‡¶ø‡¶∂‡ßÅ ‡¶Ø‡ßã‡¶ó ‡¶ï‡¶∞‡ßÅ‡¶®
                    </button>
                </form>
            </div>
            
            <!-- Vaccination Schedule -->
            <div style="background: #fffaf0; padding: 1.5rem; border-radius: 10px;">
                <h4 style="color: #2d3748; margin-bottom: 1rem;">‡¶ü‡¶ø‡¶ï‡¶æ ‡¶∏‡¶Æ‡¶Ø‡¶º‡¶∏‡ßÇ‡¶ö‡ßÄ (EPI)</h4>
                <div style="color: #718096; font-size: 0.9rem;">
                    <p>‚Ä¢ ‡¶ú‡¶®‡ßç‡¶Æ: BCG, OPV-0</p>
                    <p>‚Ä¢ ‡ß¨ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π: Penta-1, OPV-1</p>
                    <p>‚Ä¢ ‡ßß‡ß¶ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π: Penta-2, OPV-2</p>
                    <p>‚Ä¢ ‡ßß‡ß™ ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π: Penta-3, OPV-3</p>
                    <p>‚Ä¢ ‡ßØ ‡¶Æ‡¶æ‡¶∏: MR-1</p>
                    <p>‚Ä¢ ‡ßß‡ß´ ‡¶Æ‡¶æ‡¶∏: MR-2</p>
                </div>
            </div>
        </div>
        
        <!-- Children List -->
        <div id="childrenList" style="margin-top: 2rem;"></div>
    </div>

    <!-- Important Notes -->
    <div style="background: #fff3cd; border: 1px solid #ffeaa7; padding: 1.5rem; border-radius: 10px; margin: 2rem 0;">
        <h4 style="color: #856404; margin-bottom: 1rem;">üìù ‡¶ó‡ßÅ‡¶∞‡ßÅ‡¶§‡ßç‡¶¨‡¶™‡ßÇ‡¶∞‡ßç‡¶£ ‡¶§‡¶•‡ßç‡¶Ø</h4>
        <ul style="color: #856404; padding-left: 1.5rem;">
            <li>‡¶∏‡¶Æ‡¶∏‡ßç‡¶§ ‡¶§‡¶•‡ßç‡¶Ø ‡¶∂‡ßÅ‡¶ß‡ßÅ‡¶Æ‡¶æ‡¶§‡ßç‡¶∞ ‡¶Ü‡¶™‡¶®‡¶æ‡¶∞ ‡¶°‡¶ø‡¶≠‡¶æ‡¶á‡¶∏‡ßá ‡¶∏‡¶Ç‡¶∞‡¶ï‡ßç‡¶∑‡¶ø‡¶§ ‡¶π‡¶Ø‡¶º</li>
            <li>‡¶ü‡¶ø‡¶ï‡¶æ‡¶∞ ‡¶ï‡¶æ‡¶∞‡ßç‡¶° ‡¶π‡¶æ‡¶∞‡¶ø‡¶Ø‡¶º‡ßá ‡¶ó‡ßá‡¶≤‡ßá ‡¶è‡¶á ‡¶§‡¶•‡ßç‡¶Ø ‡¶¨‡ßç‡¶Ø‡¶¨‡¶π‡¶æ‡¶∞ ‡¶ï‡¶∞‡ßÅ‡¶®</li>
            <li>‡¶ú‡¶∞‡ßÅ‡¶∞‡ßÄ ‡¶≤‡¶ï‡ßç‡¶∑‡¶£ ‡¶¶‡ßá‡¶ñ‡¶≤‡ßá ‡¶π‡¶æ‡¶∏‡¶™‡¶æ‡¶§‡¶æ‡¶≤‡ßá ‡¶Ø‡¶æ‡¶®</li>
            <li>‡¶®‡¶ø‡¶Ø‡¶º‡¶Æ‡¶ø‡¶§‡¶≠‡¶æ‡¶¨‡ßá ‡¶ï‡¶Æ‡¶ø‡¶â‡¶®‡¶ø‡¶ü‡¶ø ‡¶ï‡ßç‡¶≤‡¶ø‡¶®‡¶ø‡¶ï‡ßá ‡¶Ø‡¶æ‡¶®</li>
        </ul>
    </div>
    </div>
</main>

<style>
.vaccine-card {
    background: white;
    padding: 1rem;
    border: 2px solid #e2e8f0;
    border-radius: 8px;
    margin-bottom: 1rem;
}

.vaccine-card.completed {
    border-color: #38a169;
    background: #f0fff4;
}

.vaccine-card.pending {
    border-color: #ed8936;
    background: #fffaf0;
}

.vaccine-card.overdue {
    border-color: #e53e3e;
    background: #fed7d7;
}

.checkup-card {
    background: #f7fafc;
    padding: 1rem;
    border-radius: 8px;
    border-left: 4px solid #667eea;
    margin-bottom: 1rem;
}
</style>

<script>
// Pregnancy Calculator
document.getElementById('pregnancyForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const lastPeriodDate = new Date(this.last_period_date.value);
    const expectedDelivery = new Date(lastPeriodDate);
    expectedDelivery.setDate(expectedDelivery.getDate() + 280);
    
    const today = new Date();
    const weeksPregnant = Math.floor((today - lastPeriodDate) / (7 * 24 * 60 * 60 * 1000));
    const daysLeft = Math.floor((expectedDelivery - today) / (24 * 60 * 60 * 1000));
    const trimester = weeksPregnant < 13 ? 1 : weeksPregnant < 27 ? 2 : 3;
    
    // Update display
    document.getElementById('currentWeek').textContent = weeksPregnant;
    document.getElementById('daysLeft').textContent = daysLeft;
    document.getElementById('trimester').textContent = trimester;
    
    // Generate upcoming checkups
    const checkups = generateCheckups(lastPeriodDate);
    displayCheckups(checkups);
    
    document.getElementById('pregnancyProgress').style.display = 'block';
    
    // Save to localStorage
    const pregnancyData = {
        lastPeriodDate: lastPeriodDate.toISOString(),
        expectedDelivery: expectedDelivery.toISOString()
    };
    localStorage.setItem('pregnancyData', JSON.stringify(pregnancyData));
});

function generateCheckups(lastPeriodDate) {
    const checkups = [
        { name: '‡ßß‡¶Æ ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 12 },
        { name: '‡ß®‡¶Ø‡¶º ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 26 },
        { name: '‡ß©‡¶Ø‡¶º ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 32 },
        { name: '‡ß™‡¶∞‡ßç‡¶• ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 36 },
        { name: '‡ß´‡¶Æ ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 38 },
        { name: '‡ß¨‡¶∑‡ßç‡¶† ANC ‡¶≠‡¶ø‡¶ú‡¶ø‡¶ü', weeks: 40 }
    ];
    
    return checkups.map(checkup => {
        const date = new Date(lastPeriodDate);
        date.setDate(date.getDate() + (checkup.weeks * 7));
        return {
            name: checkup.name,
            date: date,
            weeks: checkup.weeks
        };
    });
}

function displayCheckups(checkups) {
    const container = document.getElementById('upcomingCheckups');
    const today = new Date();
    
    container.innerHTML = checkups.map(checkup => {
        const isUpcoming = checkup.date > today;
        const daysUntil = Math.ceil((checkup.date - today) / (24 * 60 * 60 * 1000));
        
        if (isUpcoming) {
            return `
                <div class="checkup-card">
                    <div style="display: flex; justify-content: between; align-items: center;">
                        <div>
                            <strong>${checkup.name}</strong>
                            <div style="color: #718096; font-size: 0.9rem;">
                                ${checkup.date.toLocaleDateString('bn-BD')} ‚Ä¢ ${checkup.weeks} ‡¶∏‡¶™‡ßç‡¶§‡¶æ‡¶π
                            </div>
                        </div>
                        <div style="background: #ed8936; color: white; padding: 0.5rem 1rem; border-radius: 20px; font-size: 0.9rem;">
                            ${daysUntil} ‡¶¶‡¶ø‡¶® ‡¶¨‡¶æ‡¶ï‡¶ø
                        </div>
                    </div>
                </div>
            `;
        }
        return '';
    }).join('');
}

// Vaccination Tracker
document.getElementById('childForm').addEventListener('submit', function(e) {
    e.preventDefault();
    
    const childData = {
        name: this.child_name.value,
        birthDate: this.birth_date.value,
        vaccines: generateVaccineSchedule(new Date(this.birth_date.value))
    };
    
    saveChildData(childData);
    displayChildren();
    this.reset();
});

function generateVaccineSchedule(birthDate) {
    const vaccines = [
        { name: 'BCG (‡¶Ø‡¶ï‡ßç‡¶∑‡ßç‡¶Æ‡¶æ)', type: 'bcg', days: 0 },
        { name: 'OPV-0 (‡¶™‡ßã‡¶≤‡¶ø‡¶ì)', type: 'opv0', days: 0 },
        { name: 'Penta-1 (‡¶™‡ßá‡¶®‡ßç‡¶ü‡¶æ)', type: 'penta1', days: 42 },
        { name: 'OPV-1 (‡¶™‡ßã‡¶≤‡¶ø‡¶ì)', type: 'opv1', days: 42 },
        { name: 'Penta-2 (‡¶™‡ßá‡¶®‡ßç‡¶ü‡¶æ)', type: 'penta2', days: 70 },
        { name: 'OPV-2 (‡¶™‡ßã‡¶≤‡¶ø‡¶ì)', type: 'opv2', days: 70 },
        { name: 'Penta-3 (‡¶™‡ßá‡¶®‡ßç‡¶ü‡¶æ)', type: 'penta3', days: 98 },
        { name: 'OPV-3 (‡¶™‡ßã‡¶≤‡¶ø‡¶ì)', type: 'opv3', days: 98 },
        { name: 'MR-1 (‡¶π‡¶æ‡¶Æ ‡¶ì ‡¶∞‡ßÅ‡¶¨‡ßá‡¶≤‡¶æ)', type: 'mr1', days: 270 },
        { name: 'MR-2 (‡¶π‡¶æ‡¶Æ ‡¶ì ‡¶∞‡ßÅ‡¶¨‡ßá‡¶≤‡¶æ)', type: 'mr2', days: 450 }
    ];
    
    return vaccines.map(vaccine => {
        const date = new Date(birthDate);
        date.setDate(date.getDate() + vaccine.days);
        return {
            ...vaccine,
            scheduledDate: date,
            completed: false
        };
    });
}

function saveChildData(childData) {
    let children = JSON.parse(localStorage.getItem('children') || '[]');
    children.push(childData);
    localStorage.setItem('children', JSON.stringify(children));
}

function displayChildren() {
    const container = document.getElementById('childrenList');
    const children = JSON.parse(localStorage.getItem('children') || '[]');
    const today = new Date();
    
    container.innerHTML = children.map((child, index) => {
        const pendingVaccines = child.vaccines.filter(v => !v.completed && new Date(v.scheduledDate) <= today);
        const upcomingVaccines = child.vaccines.filter(v => !v.completed && new Date(v.scheduledDate) > today);
        
        return `
            <div style="background: #f7fafc; padding: 1.5rem; border-radius: 10px; margin-bottom: 1.5rem;">
                <div style="display: flex; justify-content: between; align-items: center; margin-bottom: 1rem;">
                    <h4 style="color: #2d3748; margin: 0;">${child.name}</h4>
                    <div style="color: #718096;">
                        ‡¶ú‡¶®‡ßç‡¶Æ: ${new Date(child.birthDate).toLocaleDateString('bn-BD')}
                    </div>
                </div>
                
                ${pendingVaccines.length > 0 ? `
                    <div style="color: #e53e3e; margin-bottom: 1rem;">
                        <strong>‡¶¨‡¶ï‡ßá‡¶Ø‡¶º‡¶æ ‡¶ü‡¶ø‡¶ï‡¶æ:</strong> ${pendingVaccines.length}‡¶ü‡¶ø
                    </div>
                ` : ''}
                
                <div style="display: grid; gap: 0.5rem;">
                    ${child.vaccines.map(vaccine => {
                        const vaccineDate = new Date(vaccine.scheduledDate);
                        const isOverdue = !vaccine.completed && vaccineDate < today;
                        const isPending = !vaccine.completed && vaccineDate >= today;
                        
                        let statusClass = 'completed';
                        let statusText = '‡¶∏‡¶Æ‡ßç‡¶™‡¶®‡ßç‡¶®';
                        
                        if (isOverdue) {
                            statusClass = 'overdue';
                            statusText = '‡¶¨‡¶ï‡ßá‡¶Ø‡¶º‡¶æ';
                        } else if (isPending) {
                            statusClass = 'pending';
                            statusText = '‡¶Ö‡¶™‡ßá‡¶ï‡ßç‡¶∑‡¶Æ‡¶æ‡¶®';
                        }
                        
                        return `
                            <div class="vaccine-card ${statusClass}">
                                <div style="display: flex; justify-content: between; align-items: center;">
                                    <div>
                                        <strong>${vaccine.name}</strong>
                                        <div style="color: #718096; font-size: 0.9rem;">
                                            ${vaccineDate.toLocaleDateString('bn-BD')}
                                        </div>
                                    </div>
                                    <div style="background: ${isOverdue ? '#e53e3e' : isPending ? '#ed8936' : '#38a169'}; 
                                         color: white; padding: 0.25rem 0.75rem; border-radius: 15px; font-size: 0.8rem;">
                                        ${statusText}
                                    </div>
                                </div>
                            </div>
                        `;
                    }).join('')}
                </div>
            </div>
        `;
    }).join('');
}

// Load saved data on page load
document.addEventListener('DOMContentLoaded', function() {
    displayChildren();
    
    // Load pregnancy data if exists
    const pregnancyData = localStorage.getItem('pregnancyData');
    if (pregnancyData) {
        const data = JSON.parse(pregnancyData);
        document.querySelector('input[name="last_period_date"]').value = data.lastPeriodDate.split('T')[0];
        document.getElementById('pregnancyForm').dispatchEvent(new Event('submit'));
    }
});
</script>
{% endblock %}